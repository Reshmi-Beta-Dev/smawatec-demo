<div class="app">
    <main class="content">
        <div class="main-layout">
            <!-- Main Content -->
            <div class="main-content">
                <!-- Search and Chart Section -->
                <div class="search-chart-section">
                    <!-- Search Section -->
                    <div class="search-section">
                        <h2>Search</h2>
                        <div class="search-form">
                            <div class="search-column">
                                <div class="form-group">
                                    <label>Keyword</label>
                                    <input type="text" placeholder="" [(ngModel)]="searchData.keyword">
                                </div>
                                <div class="form-group">
                                    <label>Building</label>
                                    <input type="text" placeholder="" [(ngModel)]="searchData.building">
                                </div>
                                <div class="form-group">
                                    <label>Building Group</label>
                                    <input type="text" placeholder="" [(ngModel)]="searchData.buildingGroup">
                                </div>
                                <div class="form-group">
                                    <label>Device Name</label>
                                    <input type="text" placeholder="" [(ngModel)]="searchData.deviceName">
                                </div>
                            </div>
                            <div class="search-column">
                                <div class="form-group">
                                    <label>City</label>
                                    <input type="text" placeholder="" [(ngModel)]="searchData.city">
                                </div>
                                <div class="form-group">
                                    <label>Zip Code</label>
                                    <input type="text" placeholder="" [(ngModel)]="searchData.zipCode">
                                </div>
                                <div class="form-group">
                                    <label>Tenant</label>
                                    <input type="text" placeholder="" [(ngModel)]="searchData.tenant">
                                </div>
                                <div class="form-group">
                                    <label>Tenant ID</label>
                                    <input type="text" placeholder="" [(ngModel)]="searchData.tenantId">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Section -->
                    <div class="chart-section">
                        <div class="chart-header">
                            <button class="nav-btn" (click)="previousPeriod()">←</button>
                            <h3>Today</h3>
                            <button class="nav-btn" (click)="nextPeriod()">→</button>
                        </div>
                        <div class="chart-container">
                            <canvas id="waterChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Parallel Layout: Building Groups and Statistics -->
                <div class="parallel-sections">
                    <!-- Building Groups Table -->
                    <div class="building-groups-section">
                        <h3>Building Groups</h3>
                        <div class="box">
                            <div class="table-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Group</th>
                                            <th>Building</th>
                                            <th>Zip Code</th>
                                            <th>Address</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Loading State -->
                                        <tr *ngIf="loading">
                                            <td colspan="5" class="loading-cell">
                                                <div class="table-loading-state">
                                                    <div class="loading-spinner"></div>
                                                    <span>Loading building groups...</span>
                                                </div>
                                            </td>
                                        </tr>
                                        
                                        <!-- Error State -->
                                        <tr *ngIf="error">
                                            <td colspan="5" class="error-cell">
                                                <div class="table-error-state">
                                                    <span>{{ error }}</span>
                                                    <button (click)="loadData()" class="retry-button">Retry</button>
                                                </div>
                                            </td>
                                        </tr>
                                        
                                        <!-- No Data State -->
                                        <tr *ngIf="!loading && !error && paginatedBuildingGroups.length === 0">
                                            <td colspan="5" class="no-data-cell">
                                                <div class="no-data-state">
                                                    <span>No building groups found</span>
                                                </div>
                                            </td>
                                        </tr>
                                        
                                        <!-- Data Rows -->
                                        <tr *ngFor="let group of paginatedBuildingGroups; let i = index" 
                                            (click)="onBuildingGroupRowClick(i)" 
                                            [class.selected]="selectedBuildingGroupRow === i">
                                            <td>{{ (buildingGroupCurrentPage - 1) * buildingGroupItemsPerPage + i + 1 }}</td>
                                            <td>{{ group.group }}</td>
                                            <td>{{ group.building }}</td>
                                            <td>{{ group.zipCode }}</td>
                                            <td>{{ group.address }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                                <!-- Building Groups Pagination -->
                                <div *ngIf="buildingGroupTotalPages > 1" class="pagination-container">
                                    <div class="pagination-info">
                                        <span>Showing {{ (buildingGroupCurrentPage - 1) * buildingGroupItemsPerPage + 1 }} to {{ Math.min(buildingGroupCurrentPage * buildingGroupItemsPerPage, buildingGroupTotalItems) }} of {{ buildingGroupTotalItems }} groups</span>
                                    </div>
                                    
                                    <div class="pagination-controls">
                                        <button class="pagination-btn" 
                                                [disabled]="buildingGroupCurrentPage === 1" 
                                                (click)="previousBuildingGroupPage()"
                                                title="Previous Page">
                                            ‹
                                        </button>
                                        
                                        <button *ngFor="let page of getBuildingGroupPageNumbers()" 
                                                class="pagination-btn" 
                                                [class.active]="page === buildingGroupCurrentPage"
                                                (click)="goToBuildingGroupPage(page)">
                                            {{ page }}
                                        </button>
                                        
                                        <button class="pagination-btn" 
                                                [disabled]="buildingGroupCurrentPage === buildingGroupTotalPages" 
                                                (click)="nextBuildingGroupPage()"
                                                title="Next Page">
                                            ›
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Statistics Section -->
                    <div class="stats-section">
                        <h3>Export</h3>
                        <div class="box">
                            <div class="stats-content-layout">
                                <!-- Left Side - Statistics -->
                                <div class="stats-left">
                                    <div class="stat-item">
                                        <span class="stat-label">Today:</span>
                                        <span class="stat-value">123 Liter</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">Yesterday:</span>
                                        <span class="stat-value">230 Liter</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">this week:</span>
                                        <span class="stat-value">899 Liter</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">this Month:</span>
                                        <span class="stat-value">22 m3</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">this Year:</span>
                                        <span class="stat-value">342m3</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">last year:</span>
                                        <span class="stat-value">388m3</span>
                                    </div>
                                </div>
                                
                                    <!-- Right Side - Period and Buttons -->
                                    <div class="stats-right">
                                        <div class="period-inputs">
                                            <div class="form-group">
                                                <label>Period from</label>
                                                <input type="text" placeholder="" [(ngModel)]="periodFrom">
                                            </div>
                                            <div class="form-group">
                                                <label>Period to</label>
                                                <input type="text" placeholder="" [(ngModel)]="periodTo">
                                            </div>
                                            <button class="btn btn-primary" (click)="resetPeriod()">
                                                Reset Period
                                            </button>
                                        </div>

                                        <div class="export-buttons">
                                            <button class="btn btn-primary" (click)="exportPDF()">
                                                Export PDF
                                            </button>
                                            <button class="btn btn-primary" (click)="exportXLS()">
                                                Export XLS
                                            </button>
                                        </div>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Parallel Layout: Building and Apartment Tables -->
                <div class="parallel-tables-section">
                    <!-- Building Table -->
                    <div class="building-section">
                        <h3>Building</h3>
                        <div class="box">
                            <div class="table-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Building</th>
                                            <th>Zip Code</th>
                                            <th>Address</th>
                                            <th>Apartment</th>
                                            <th>Tenant</th>
                                        </tr>
                                    </thead>
                        <tbody>
                            <!-- Loading State -->
                            <tr *ngIf="loading">
                                <td colspan="6" class="loading-cell">
                                    <div class="table-loading-state">
                                        <div class="loading-spinner"></div>
                                        <span>Loading buildings...</span>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- Error State -->
                            <tr *ngIf="error">
                                <td colspan="6" class="error-cell">
                                    <div class="table-error-state">
                                        <span>{{ error }}</span>
                                        <button (click)="loadData()" class="retry-button">Retry</button>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- No Data State -->
                            <tr *ngIf="!loading && !error && paginatedBuildings.length === 0">
                                <td colspan="6" class="no-data-cell">
                                    <div class="no-data-state">
                                        <span>No buildings found</span>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- Data Rows -->
                            <tr *ngFor="let building of paginatedBuildings; let i = index" 
                                (click)="onBuildingRowClick(i)" 
                                [class.selected]="selectedBuildingRow === i">
                                <td>{{ (buildingCurrentPage - 1) * buildingItemsPerPage + i + 1 }}</td>
                                <td>{{ building.building }}</td>
                                <td>{{ building.zipCode }}</td>
                                <td>{{ building.address }}</td>
                                <td>{{ building.apartment }}</td>
                                <td>{{ building.tenant }}</td>
                            </tr>
                        </tbody>
                                </table>
                                
                                <!-- Building Pagination -->
                                <div *ngIf="buildingTotalPages > 1" class="pagination-container">
                                    <div class="pagination-info">
                                        <span>Showing {{ (buildingCurrentPage - 1) * buildingItemsPerPage + 1 }} to {{ Math.min(buildingCurrentPage * buildingItemsPerPage, buildingTotalItems) }} of {{ buildingTotalItems }} buildings</span>
                                    </div>
                                    
                                    <div class="pagination-controls">
                                        <button class="pagination-btn" 
                                                [disabled]="buildingCurrentPage === 1" 
                                                (click)="previousBuildingPage()"
                                                title="Previous Page">
                                            ‹
                                        </button>
                                        
                                        <button *ngFor="let page of getBuildingPageNumbers()" 
                                                class="pagination-btn" 
                                                [class.active]="page === buildingCurrentPage"
                                                (click)="goToBuildingPage(page)">
                                            {{ page }}
                                        </button>
                                        
                                        <button class="pagination-btn" 
                                                [disabled]="buildingCurrentPage === buildingTotalPages" 
                                                (click)="nextBuildingPage()"
                                                title="Next Page">
                                            ›
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Apartment Table -->
                    <div class="apartment-section">
                        <h3>Apartment</h3>
                        <div class="box">
                            <div class="table-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Apartment</th>
                                            <th>Tenant</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let apartment of paginatedApartments; let i = index" 
                                            (click)="onApartmentRowClick(i)" 
                                            [class.selected]="selectedApartmentRow === i">
                                            <td>{{ (apartmentCurrentPage - 1) * apartmentItemsPerPage + i + 1 }}</td>
                                            <td>{{ apartment.apartment }}</td>
                                            <td>{{ apartment.tenant }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                                <!-- Apartment Pagination -->
                                <div *ngIf="apartmentTotalPages > 1" class="pagination-container">
                                    <div class="pagination-info">
                                        <span>Showing {{ (apartmentCurrentPage - 1) * apartmentItemsPerPage + 1 }} to {{ Math.min(apartmentCurrentPage * apartmentItemsPerPage, apartmentTotalItems) }} of {{ apartmentTotalItems }} apartments</span>
                                    </div>
                                    
                                    <div class="pagination-controls">
                                        <button class="pagination-btn" 
                                                [disabled]="apartmentCurrentPage === 1" 
                                                (click)="previousApartmentPage()"
                                                title="Previous Page">
                                            ‹
                                        </button>
                                        
                                        <button *ngFor="let page of getApartmentPageNumbers()" 
                                                class="pagination-btn" 
                                                [class.active]="page === apartmentCurrentPage"
                                                (click)="goToApartmentPage(page)">
                                            {{ page }}
                                        </button>
                                        
                                        <button class="pagination-btn" 
                                                [disabled]="apartmentCurrentPage === apartmentTotalPages" 
                                                (click)="nextApartmentPage()"
                                                title="Next Page">
                                            ›
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
